<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Concerto · Setlists & Tour Info</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@500;600&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="./styles.css" />
</head>

<body>
  <header class="page-header">
    <div class="page-header-inner">
      <img
        src="./images/brand/concerto-logo.png"
        alt="Concerto - From the Concert to the City"
        class="brand-logo"
      />

      <h1 class="feature-title">Setlists &amp; Tour Info</h1>
      <p class="tagline">Pick a tour. Get the setlist—instantly.</p>

      <div class="header-actions">
        <a class="btn-ghost" href="#" id="openHelp">How it works</a>
      </div>
    </div>
  </header>

  <main class="container">
    <!-- Search -->
    <section class="hero">
      <div class="search-row">
        <div class="search">
          <input
            id="tourSearch"
            type="search"
            placeholder="Search tours or artists"
            autocomplete="off"
          />
          <button id="clearSearchBtn" class="icon-btn" title="Clear" aria-label="Clear">×</button>
        </div>
      </div>

      <!-- Keep dropdown (JS uses it) -->
      <div id="searchResults" class="search-results"></div>
    </section>

    <!-- Main panel -->
    <section id="infoPanel" class="info-panel info-panel--empty">
      <!-- Empty state -->
      <div class="info-empty">
        <h2>Browse Tours</h2>
        <p>
          Search above or pick one below. If a setlist is available, tap songs to generate
          Apple Music and Spotify links automatically.
        </p>
      </div>

      <!-- Detail mode -->
      <div class="info-content" hidden>
        <button id="backToLibrary" class="back-btn" type="button" aria-label="Back to Tour Library">
          ← Tour Library
        </button>

        <header class="info-header">
          <div>
            <h2 id="tourName"></h2>
            <p id="tourArtist" class="tour-artist-line"></p>
            <p id="tourMeta" class="tour-meta-line"></p>
          </div>
        </header>

        <div class="info-cards">
          <article class="info-card">
            <div class="section-head">
              <div>
                <div class="section-title">Tour Info</div>
                <div class="section-sub">Start time and official tour site.</div>
              </div>
            </div>
            <div class="section-body">
              <div id="tourInfoGrid" class="tour-info-grid"></div>
            </div>
          </article>

          <article class="info-card">
            <div class="section-head">
              <div>
                <div class="section-title">Setlist</div>
                <div class="section-sub">Tap a song to reveal links.</div>
              </div>
            </div>
            <div class="section-body">
              <div id="setlistList" class="setlist-list"></div>
            </div>
          </article>
        </div>
      </div>

      <!-- Library -->
      <section class="browse-list">
        <div class="grid-head">
          <div class="muted" id="libraryMeta"></div>
          <div class="right"></div>
        </div>

        <div id="toursBrowseList" class="grid"></div>
      </section>
    </section>
  </main>

  <!-- Help modal -->
  <div class="modal" id="modal" hidden>
    <div class="modal-backdrop" id="modalClose"></div>
    <div class="modal-card">
      <div class="modal-title">How Setlists Works</div>
      <div class="modal-body">
        <ul class="bullets">
          <li>Browse or search tours.</li>
          <li>Tap a tour to open the details page.</li>
          <li>If a setlist is available, tap songs to get links.</li>
          <li>Apple Music + Spotify links generate automatically.</li>
        </ul>
      </div>
      <div class="modal-actions">
        <button class="primary-btn" id="modalOk">Got it</button>
      </div>
    </div>
  </div>

  <script src="./app.js" defer></script>

  <script>
    window.addEventListener("DOMContentLoaded", () => {
      const openHelp = document.getElementById("openHelp");
      const modal = document.getElementById("modal");
      const close = document.getElementById("modalClose");
      const ok = document.getElementById("modalOk");

      function openM(e){ e?.preventDefault?.(); modal.hidden = false; }
      function closeM(){ modal.hidden = true; }

      openHelp?.addEventListener("click", openM);
      close?.addEventListener("click", closeM);
      ok?.addEventListener("click", closeM);
    });
  </script>
</body>
</html>
